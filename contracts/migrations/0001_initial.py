# Generated by Django 5.2.8 on 2025-12-21 22:50

import django.core.validators
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='WorkSchedule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('employer_id', models.IntegerField(db_index=True)),
                ('name', models.CharField(help_text='e.g., Standard 9-5, Night Shift, Flexible Remote', max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('weekly_schedule', models.JSONField(default=dict, help_text='Schedule for each day of the week')),
                ('total_hours_per_week', models.DecimalField(decimal_places=2, default=40.0, max_digits=5)),
                ('working_days_per_week', models.IntegerField(default=5)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_id', models.IntegerField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Work Schedule',
                'verbose_name_plural': 'Work Schedules',
                'db_table': 'work_schedules',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='AllowanceType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('employer_id', models.IntegerField(db_index=True, help_text='ID of the employer (from main database)')),
                ('name', models.CharField(help_text='e.g., Transport Allowance, Housing Allowance', max_length=100)),
                ('code', models.CharField(help_text='Unique code, e.g., TRANSPORT, HOUSING', max_length=50)),
                ('category', models.CharField(blank=True, help_text='Group type, e.g., Monthly Recurring, Variable', max_length=50, null=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('calculation_method', models.CharField(choices=[('FIXED', 'Fixed Amount'), ('PERCENTAGE', 'Percentage of Base Salary'), ('CUSTOM', 'Custom Formula')], default='FIXED', max_length=20)),
                ('default_amount', models.DecimalField(blank=True, decimal_places=2, help_text='Standard amount if fixed', max_digits=12, null=True)),
                ('default_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Standard percentage if percentage-based', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('can_override', models.BooleanField(default=True, help_text='Allow HR to adjust per employee')),
                ('is_taxable', models.BooleanField(default=True, help_text='Subject to income tax (IRPP)')),
                ('is_cnps_contributable', models.BooleanField(default=True, help_text='Included in CNPS calculation base')),
                ('frequency', models.CharField(choices=[('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('ANNUAL', 'Annual'), ('ONE_TIME', 'One-Time')], default='MONTHLY', max_length=20)),
                ('proration_rule', models.CharField(choices=[('PRORATE_DAYS', 'Prorate by days worked'), ('FULL_IF_THRESHOLD', 'Full amount if worked > threshold days'), ('NO_PRORATION', 'No proration - always full amount')], default='PRORATE_DAYS', max_length=30)),
                ('proration_threshold_days', models.IntegerField(default=15, help_text='Threshold for FULL_IF_THRESHOLD rule')),
                ('requires_approval', models.BooleanField(default=False, help_text='Need manager approval to add')),
                ('display_on_payslip', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0, help_text='Sort order in UI')),
                ('gl_account_code', models.CharField(blank=True, help_text='General Ledger account code', max_length=50, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_id', models.IntegerField(blank=True, db_index=True, null=True)),
            ],
            options={
                'verbose_name': 'Allowance Type',
                'verbose_name_plural': 'Allowance Types',
                'db_table': 'allowance_types',
                'ordering': ['display_order', 'name'],
                'unique_together': {('employer_id', 'code')},
            },
        ),
        migrations.CreateModel(
            name='ContractType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('employer_id', models.IntegerField(db_index=True, help_text='ID of the employer (from main database)')),
                ('name', models.CharField(help_text='e.g., Permanent Full-Time, Fixed-Term, Internship', max_length=100)),
                ('code', models.CharField(help_text='Unique short code, e.g., PERM_FT, FIXED, INTERN', max_length=20)),
                ('description', models.TextField(blank=True, help_text='Explanation of when to use this type', null=True)),
                ('is_active', models.BooleanField(default=True, help_text='Whether this type is available for selection')),
                ('requires_end_date', models.BooleanField(default=False, help_text='Force end date input for this type')),
                ('default_duration_months', models.IntegerField(blank=True, help_text='Default duration in months (for fixed-term)', null=True)),
                ('max_duration_months', models.IntegerField(blank=True, help_text='Maximum allowed duration (legal limit)', null=True)),
                ('default_probation_months', models.IntegerField(default=3, help_text='Default probation period in months')),
                ('default_notice_period_days', models.IntegerField(default=30, help_text='Default notice period for termination')),
                ('default_working_hours_per_week', models.DecimalField(decimal_places=2, default=40.0, help_text='Standard working hours per week', max_digits=5)),
                ('overtime_eligible', models.BooleanField(default=True, help_text='Whether employees can earn overtime')),
                ('default_overtime_rate_weekday', models.DecimalField(decimal_places=2, default=1.5, help_text='Overtime multiplier for weekdays', max_digits=4)),
                ('default_overtime_rate_weekend', models.DecimalField(decimal_places=2, default=2.0, help_text='Overtime multiplier for weekends', max_digits=4)),
                ('default_overtime_rate_holiday', models.DecimalField(decimal_places=2, default=2.5, help_text='Overtime multiplier for holidays', max_digits=4)),
                ('default_allowances', models.JSONField(blank=True, default=list, help_text='List of allowance type codes to auto-apply')),
                ('default_deductions', models.JSONField(blank=True, default=list, help_text='List of deduction type codes to auto-apply')),
                ('auto_renew', models.BooleanField(default=False, help_text='Automatically renew contracts on expiry')),
                ('renewal_notice_days', models.IntegerField(default=30, help_text='Days before expiry to notify about renewal')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_id', models.IntegerField(blank=True, db_index=True, help_text='ID of the user who created this type', null=True)),
            ],
            options={
                'verbose_name': 'Contract Type',
                'verbose_name_plural': 'Contract Types',
                'db_table': 'contract_types',
                'ordering': ['name'],
                'unique_together': {('employer_id', 'code')},
            },
        ),
        migrations.CreateModel(
            name='DeductionType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('employer_id', models.IntegerField(db_index=True, help_text='ID of the employer (from main database)')),
                ('name', models.CharField(help_text='e.g., CNPS Employee, IRPP, Loan Repayment', max_length=100)),
                ('code', models.CharField(help_text='Unique code, e.g., CNPS_EMP, IRPP', max_length=50)),
                ('category', models.CharField(blank=True, help_text='e.g., Statutory, Voluntary', max_length=50, null=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('calculation_method', models.CharField(choices=[('FIXED', 'Fixed Amount'), ('PERCENTAGE_GROSS', 'Percentage of Gross Salary'), ('PERCENTAGE_NET', 'Percentage of Net Salary'), ('CUSTOM', 'Custom Formula')], default='PERCENTAGE_GROSS', max_length=20)),
                ('calculation_base', models.CharField(choices=[('BASE_SALARY', 'Base Salary Only'), ('GROSS_SALARY', 'Gross Salary (Base + Allowances)'), ('TAXABLE_GROSS', 'Taxable Gross'), ('NET_SALARY', 'Net Salary')], default='GROSS_SALARY', max_length=20)),
                ('default_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Standard percentage, e.g., 4.2 for CNPS', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('default_amount', models.DecimalField(blank=True, decimal_places=2, help_text='Standard amount if fixed', max_digits=12, null=True)),
                ('max_amount', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum deduction amount (ceiling)', max_digits=12, null=True)),
                ('is_mandatory', models.BooleanField(default=False, help_text='Required by company policy')),
                ('is_statutory', models.BooleanField(default=False, help_text='Required by law (CNPS, IRPP)')),
                ('priority_order', models.IntegerField(default=5, help_text='Lower number = deducted first (1=statutory, 5=voluntary)')),
                ('proration_rule', models.CharField(choices=[('PRORATE_DAYS', 'Prorate by days worked'), ('FULL_MONTHLY', 'Full amount monthly'), ('NO_PRORATION', 'No proration')], default='PRORATE_DAYS', max_length=30)),
                ('requires_approval', models.BooleanField(default=False)),
                ('display_on_payslip', models.BooleanField(default=True)),
                ('display_order', models.IntegerField(default=0)),
                ('gl_account_code', models.CharField(blank=True, max_length=50, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_id', models.IntegerField(blank=True, db_index=True, null=True)),
            ],
            options={
                'verbose_name': 'Deduction Type',
                'verbose_name_plural': 'Deduction Types',
                'db_table': 'deduction_types',
                'ordering': ['priority_order', 'display_order', 'name'],
                'unique_together': {('employer_id', 'code')},
            },
        ),
        migrations.CreateModel(
            name='SalaryScale',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('employer_id', models.IntegerField(db_index=True, help_text='ID of the employer (from main database)')),
                ('name', models.CharField(help_text='e.g., IT Developer - Senior, Manager Level 5', max_length=100)),
                ('grade_level', models.CharField(help_text='Organizational level, e.g., L7, Senior', max_length=50)),
                ('job_family', models.CharField(blank=True, help_text='Job category, e.g., IT, Finance, HR', max_length=100, null=True)),
                ('currency', models.CharField(default='XAF', help_text='Currency code', max_length=10)),
                ('min_salary', models.DecimalField(decimal_places=2, help_text='Minimum salary for this scale', max_digits=12)),
                ('mid_salary', models.DecimalField(decimal_places=2, help_text='Market midpoint salary', max_digits=12)),
                ('max_salary', models.DecimalField(decimal_places=2, help_text='Maximum salary for this scale', max_digits=12)),
                ('recommended_starting_salary', models.DecimalField(blank=True, decimal_places=2, help_text='Suggested starting salary for new hires', max_digits=12, null=True)),
                ('step_increment_percentage', models.DecimalField(decimal_places=2, default=5.0, help_text='Annual step increase percentage', max_digits=5)),
                ('number_of_steps', models.IntegerField(default=10, help_text='Number of progression steps')),
                ('effective_from', models.DateField(help_text='Date when this scale becomes valid')),
                ('effective_to', models.DateField(blank=True, help_text='Date when scale expires', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_id', models.IntegerField(blank=True, db_index=True, null=True)),
            ],
            options={
                'verbose_name': 'Salary Scale',
                'verbose_name_plural': 'Salary Scales',
                'db_table': 'salary_scales',
                'ordering': ['job_family', 'grade_level'],
                'indexes': [models.Index(fields=['employer_id', 'is_active'], name='salary_scal_employe_1d62fb_idx'), models.Index(fields=['job_family'], name='salary_scal_job_fam_e5379a_idx')],
            },
        ),
    ]
